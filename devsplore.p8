pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
--devsplore
--par nas

function _init()
create_player()
score=0
state=0
enemies={}
spawn_enemies()
end

function _update()
--lancement du jeu state=0
if (state==0) update_game()
if (state==1) update_gameover()
end

function _draw()
if (state==0) draw_game()
if (state==1) draw_gameover()
end

function update_game()
player_movement()
state=1
update_enemies()
end

function update_gameover()
state=0
end

--affichage jeu
function draw_game()
cls(1)
draw_map()
draw_player() 
for e in all(enemies) do
spr(11,e.x,e.y)
end
--score view=confiance
print("confiance",2,2,7)
end

function draw_gameover()
-- ici afficher le menu gameover
end
-->8
--map

function draw_map()
	map(0,0,0,0,128,64)
end

function check_flag(flag,x,y)
	local sprite=mget(x,y)
	return fget(sprite,flag)
end
-->8
--personnage principal

function create_player()
p={
	x=3,
	y=15,
	sprite=1,
	speed=1,
}
end

function draw_player()
	spr(p.sprite,p.x*8,p.y*8)
end

function player_movement()
	newx=p.x
	newy=p.y

	if(btn(➡️)) newx+=1
	if(btn(⬅️)) newx-=1
	if(btn(⬇️)) newy+=1
	if(btn(⬆️)) newy-=1

	if not check_flag(0,newx,newy) then
		p.x=newx
		p.y=newy
	end
end
-->8
--score
--lose confiance
function lose_confiance()
if enemy.life==0
then stop(enemies,enemy)
end
score-=10
end



-->8
--ememies
function spawn_enemies()
 local new_enemy={
  x = 60,
  y = 10,
  life=4
 }
 add(enemies, new_enemy) 
end

function update_enemies()
for e in all(enemies) do
if e.y<30 then 
   e.y+=0.3
end
end
end
__gfx__
00000000000000006060606044444444440000004444444400000044600000000000000000000000000040000000000000000000000000000000000000000000
00000000000000000000000044444444440000004444444400000044000000000000000000000006000040000008800000000000000000000000000000000000
00700700009999000000000000000000440000004444444400000044600000000000000000000000004440000008800000000000000000000000000000000000
00077000009999000000000000000000440000004444444400000044000000000000000000000006004040000888888000000000000000000000000000000000
00077000009999000000000000000000440000004444444400000044600000000000000000000000000000000888888000000000000000000000000000000000
00700700009999000000000000000000440000004444444400000044000000000000000000000006000000000008800000000000000000000000000000000000
00000000000000000000000000000000440000004444444400000044600000000000000000000000000000000008800000000000000000000000000000000000
00000000000000000000000000000000440000004444444400000044000000006060606000000006000000000000000000000000000000000000000000000000
__gff__
0000010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0303030302030303030302030303030600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0700000000000000000000000000000900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000c00000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0700000000000000000000000000000900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
040c000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000c00000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0700000000000000000000000000000900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
040000000c000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0700000000000000000000000000000900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
040a000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050508050505000505050005050900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0005050805050508050508050505000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
